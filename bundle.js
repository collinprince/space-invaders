(()=>{"use strict";var e={366:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createEnemyMissile=void 0;const s=t(507);class n extends s.GameObject{constructor(e,i){super(e.x,e.y,5,5,0,3,h,{isAlive:r}),this.maxY=i}}function h(e){e.fillRect(this.x,this.y,this.width,this.height)}function r(){return this.alive&&this.y<this.maxY}i.createEnemyMissile=(e,i)=>new n(e,i)},520:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createEnemyShip=void 0;const s=t(507);class n extends s.GameObject{constructor(e){super(e.x,e.y,20,20,.5,0,h,{updatePosition:r}),this.internalClock=0}}function h(e){e.fillStyle="red",e.fillRect(this.x,this.y,this.width,this.height)}function r(){this.x+=this.dx,this.internalClock+=1,40==this.internalClock&&(this.internalClock=0,this.dx=-this.dx)}i.createEnemyShip=e=>new n(e)},507:(e,i)=>{function t(){return this.alive}function s(){this.x+=this.dx,this.y+=this.dy}Object.defineProperty(i,"__esModule",{value:!0}),i.GameObject=void 0,i.GameObject=class{constructor(e,i,n,h,r,l,a,{updatePosition:o=s,isAlive:d=t}={updatePosition:s,isAlive:t}){this.x=e,this.y=i,this.width=n,this.height=h,this.dx=r,this.dy=l,this.draw=a,this.updatePosition=o,this.isAlive=d,this.alive=!0}setX(e){this.x=e}setY(e){this.y=e}setDx(e){this.dx=e}setDy(e){this.dy=e}setPosition(e,i){this.setX(e),this.setY(i)}setDirection(e,i){this.setDx(e),this.setDy(i)}}},10:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createPlayerMissile=void 0;const s=t(507),n=t(212),h=t(810);function r(e){let i={x:this.x+this.width/2,y:this.y},t={x:this.x+this.width,y:this.y+this.height},s={x:this.x,y:this.y+this.height};e.fillStyle="black",(0,n.drawTriangleFill)(e,i,t,s)}function l(){return this.alive&&this.y>0}i.createPlayerMissile=e=>{let i={x:e.x+h.PLAYER_SHIP_WIDTH/2-2.5,y:e.y-10};return new s.GameObject(i.x,i.y,5,10,0,-10,r,{isAlive:l})}},810:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createPlayerShip=i.PlayerShip=i.PLAYER_SHIP_HEIGHT=i.PLAYER_SHIP_WIDTH=void 0;const s=t(507);i.PLAYER_SHIP_WIDTH=20,i.PLAYER_SHIP_HEIGHT=30;class n extends s.GameObject{constructor(e){super(e.x,e.y,i.PLAYER_SHIP_WIDTH,i.PLAYER_SHIP_HEIGHT,0,0,h,{updatePosition:r,isAlive:l}),this.numLives=3}decrementLives(){this.numLives-=1}}function h(e){e.fillStyle="blue",e.beginPath(),e.moveTo(this.x,this.y+this.height),e.lineTo(this.x,this.y+this.height/2),e.lineTo(this.x+this.width/5,this.y+this.height/2),e.lineTo(this.x+this.width/5,this.y+this.height*(5/8)),e.lineTo(this.x+.45*this.width,this.y),e.lineTo(this.x+.55*this.width,this.y),e.lineTo(this.x+.8*this.width,this.y+this.height*(5/8)),e.lineTo(this.x+.8*this.width,this.y+this.height/2),e.lineTo(this.x+this.width,this.y+this.height/2),e.lineTo(this.x+this.width,this.y+this.height),e.lineTo(this.x+.8*this.width,this.y+this.height),e.lineTo(this.x+.8*this.width,this.y+this.height*(7/8)),e.lineTo(this.x+.2*this.width,this.y+this.height*(7/8)),e.lineTo(this.x+.2*this.width,this.y+this.height),e.closePath(),e.fill(),e.stroke()}function r(e,i){this.x+=this.dx,this.x<0&&(this.x=0),this.x+this.width>=e&&(this.x=e-this.width)}function l(){return this.numLives>0}i.PlayerShip=n,i.createPlayerShip=e=>new n(e)},829:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.parseInputAndStopPlayerMoving=i.parseInputAndReturnAction=void 0;const s=t(10),n=e=>"ArrowLeft"===e||"Left"===e,h=e=>"ArrowRight"===e||"Right"===e,r=e=>{};i.parseInputAndReturnAction=e=>{return n(e.key)?l:h(e.key)?a:" "===(i=e.key)||"Spacebar"===i?o:r;var i},i.parseInputAndStopPlayerMoving=(e,i)=>{(n(e.key)&&i.player.dx<0||h(e.key)&&i.player.dx>0)&&(i.player.dx=0)};const l=e=>{e.player.setDx(-5)},a=e=>{e.player.setDx(5)},o=e=>{let i={x:e.player.x,y:e.player.y};e.playerMissiles.push((0,s.createPlayerMissile)(i))}},796:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.objectsAreColliding=void 0;const t=(e,i)=>e.start<i.start?e:i,s=(e,i)=>e.start<i.start?i:e;i.objectsAreColliding=(e,i)=>{const n={start:e.x,end:e.x+e.width},h={start:e.y,end:e.y+e.height},r={start:i.x,end:i.x+i.width},l={start:i.y,end:i.y+i.width},a=[t(n,r),s(n,r)],o=[t(h,l),s(h,l)],d=a[0].end>=a[1].start,y=o[0].end>=o[1].start;return d&&y}},531:(e,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.writeText=void 0,i.writeText=(e,i,t,s="20px Arial",n="black")=>{e.fillStyle=n,e.font=s,e.fillText(i,t.x,t.y)}},212:(e,i)=>{function t(e,i,t,s,n){e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(t.x,t.y),e.lineTo(s.x,s.y),e.closePath(),n&&e.fill(),e.stroke()}Object.defineProperty(i,"__esModule",{value:!0}),i.drawCircle=i.drawTriangleOutline=i.drawTriangleFill=void 0,i.drawTriangleFill=(e,i,s,n)=>t(e,i,s,n,!0),i.drawTriangleOutline=(e,i,s,n)=>t(e,i,s,n,!1),i.drawCircle=function(e,i,t){e.beginPath(),e.arc(i.x,i.y,t,0,2*Math.PI),e.stroke()}},54:(e,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clearDeadGameObjectsFromWorld=i.detectEnemyMissileAndPlayerShipCollisions=i.detectPlayerMissileAndEnemyShipCollisions=i.randomlyGenerateEnemyMissiles=i.drawAndUpdateWorld=i.init=void 0;const s=t(796),n=t(810),h=t(520),r=t(366);i.init=(e,i,t)=>{let s={x:e/2-10,y:i-100},r={player:(0,n.createPlayerShip)(s),playerMissiles:new Array,enemies:new Array,enemyMissiles:new Array,maxX:e,maxY:i};for(let s=0;s<t;++s){let n={x:20+e/t*s,y:i/10};r.enemies.push((0,h.createEnemyShip)(n))}return r},i.drawAndUpdateWorld=(e,i,t,s)=>{s.player.draw(e),s.player.updatePosition(i,t),[s.playerMissiles,s.enemies,s.enemyMissiles].forEach((s=>{s.forEach((s=>{s.draw(e),s.updatePosition(i,t)}))}))},i.randomlyGenerateEnemyMissiles=e=>{e.enemies.forEach((i=>{if(Math.random()<.001){let t={x:i.x+i.width/2,y:i.y+i.height};e.enemyMissiles.push((0,r.createEnemyMissile)(t,e.maxY))}}))},i.detectPlayerMissileAndEnemyShipCollisions=e=>{e.enemies.forEach((i=>{e.playerMissiles.forEach((e=>{(0,s.objectsAreColliding)(i,e)&&(i.alive=!1,e.alive=!1)}))}))},i.detectEnemyMissileAndPlayerShipCollisions=e=>{e.enemyMissiles.forEach((i=>{(0,s.objectsAreColliding)(e.player,i)&&(e.player.decrementLives(),i.alive=!1)}))},i.clearDeadGameObjectsFromWorld=e=>{[e.playerMissiles,e.enemies,e.enemyMissiles]=[e.playerMissiles,e.enemies,e.enemyMissiles].map((e=>e.filter((e=>e.isAlive()))))}}},i={};function t(s){var n=i[s];if(void 0!==n)return n.exports;var h=i[s]={exports:{}};return e[s](h,h.exports,t),h.exports}(()=>{const e=t(829),i=t(531),s=t(54),n=document.getElementById("canvas"),h=n.getContext("2d"),r=n.width,l=n.height;let a=(0,s.init)(r,l,10);document.addEventListener("keydown",(i=>{(0,e.parseInputAndReturnAction)(i)(a)})),document.addEventListener("keyup",(i=>{(0,e.parseInputAndStopPlayerMoving)(i,a)})),function e(){h.clearRect(0,0,n.width,n.height),(0,i.writeText)(h,`Enemies remaining: ${a.enemies.length}`,{x:10,y:20}),(0,i.writeText)(h,`Lives remaining: ${a.player.numLives}`,{x:10,y:50}),(0,s.randomlyGenerateEnemyMissiles)(a),(0,s.drawAndUpdateWorld)(h,r,l,a),(0,s.detectPlayerMissileAndEnemyShipCollisions)(a),(0,s.detectEnemyMissileAndPlayerShipCollisions)(a),(0,s.clearDeadGameObjectsFromWorld)(a),requestAnimationFrame(e)}()})()})();