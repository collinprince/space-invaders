(()=>{"use strict";var e={520:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createEnemyShip=void 0;const s=i(507);function h(e){e.fillStyle="red",e.fillRect(this.x,this.y,this.width,this.height)}t.createEnemyShip=e=>new s.GameObject(e.x,e.y,20,20,0,0,h)},507:(e,t)=>{function i(){return this.alive}function s(){this.x+=this.dx,this.y+=this.dy}Object.defineProperty(t,"__esModule",{value:!0}),t.GameObject=void 0,t.GameObject=class{constructor(e,t,h,r,n,l,a,{updatePosition:o=s,isAlive:d=i}={updatePosition:s,isAlive:i}){this.x=e,this.y=t,this.width=h,this.height=r,this.dx=n,this.dy=l,this.draw=a,this.updatePosition=o,this.isAlive=d,this.alive=!0}setX(e){this.x=e}setY(e){this.y=e}setDx(e){this.dx=e}setDy(e){this.dy=e}setPosition(e,t){this.setX(e),this.setY(t)}setDirection(e,t){this.setDx(e),this.setDy(t)}}},10:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPlayerMissile=void 0;const s=i(507),h=i(212),r=i(810);function n(e){let t={x:this.x+this.width/2,y:this.y},i={x:this.x+this.width,y:this.y+this.height},s={x:this.x,y:this.y+this.height};e.fillStyle="black",(0,h.drawTriangleFill)(e,t,i,s)}function l(){return this.alive&&this.y>0}t.createPlayerMissile=e=>{let t={x:e.x+r.PLAYER_SHIP_WIDTH/2-2.5,y:e.y-10};return new s.GameObject(t.x,t.y,5,10,0,-10,n,{isAlive:l})}},810:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPlayerShip=t.PLAYER_SHIP_HEIGHT=t.PLAYER_SHIP_WIDTH=void 0;const s=i(507);function h(e){e.fillStyle="blue",e.beginPath(),e.moveTo(this.x,this.y+this.height),e.lineTo(this.x,this.y+this.height/2),e.lineTo(this.x+this.width/5,this.y+this.height/2),e.lineTo(this.x+this.width/5,this.y+this.height*(5/8)),e.lineTo(this.x+.45*this.width,this.y),e.lineTo(this.x+.55*this.width,this.y),e.lineTo(this.x+.8*this.width,this.y+this.height*(5/8)),e.lineTo(this.x+.8*this.width,this.y+this.height/2),e.lineTo(this.x+this.width,this.y+this.height/2),e.lineTo(this.x+this.width,this.y+this.height),e.lineTo(this.x+.8*this.width,this.y+this.height),e.lineTo(this.x+.8*this.width,this.y+this.height*(7/8)),e.lineTo(this.x+.2*this.width,this.y+this.height*(7/8)),e.lineTo(this.x+.2*this.width,this.y+this.height),e.closePath(),e.fill(),e.stroke()}function r(e,t){this.x+=this.dx,this.x<0&&(this.x=0),this.x+this.width>=e&&(this.x=e-this.width)}t.PLAYER_SHIP_WIDTH=20,t.PLAYER_SHIP_HEIGHT=30,t.createPlayerShip=e=>new s.GameObject(e.x,e.y,t.PLAYER_SHIP_WIDTH,t.PLAYER_SHIP_HEIGHT,0,0,h,{updatePosition:r})},829:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseInputAndStopPlayerMoving=t.parseInputAndReturnAction=void 0;const s=i(10),h=e=>"ArrowLeft"===e||"Left"===e,r=e=>"ArrowRight"===e||"Right"===e,n=e=>{};t.parseInputAndReturnAction=e=>{return h(e.key)?l:r(e.key)?a:" "===(t=e.key)||"Spacebar"===t?o:n;var t},t.parseInputAndStopPlayerMoving=(e,t)=>{(h(e.key)&&t.player.dx<0||r(e.key)&&t.player.dx>0)&&(t.player.dx=0)};const l=e=>{e.player.setDx(-5)},a=e=>{e.player.setDx(5)},o=e=>{let t={x:e.player.x,y:e.player.y};e.playerMissiles.push((0,s.createPlayerMissile)(t))}},796:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.objectsAreColliding=void 0;const i=(e,t)=>e.start<t.start?e:t,s=(e,t)=>e.start<t.start?t:e;t.objectsAreColliding=(e,t)=>{const h={start:e.x,end:e.x+e.width},r={start:e.y,end:e.y+e.height},n={start:t.x,end:t.x+t.width},l={start:t.y,end:t.y+t.width},a=[i(h,n),s(h,n)],o=[i(r,l),s(r,l)],d=a[0].end>=a[1].start,y=o[0].end>=o[1].start;return d&&y}},531:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.writeText=void 0,t.writeText=(e,t,i=10,s=20,h="20px Arial",r="black")=>{e.fillStyle=r,e.font=h,e.fillText(t,i,s)}},212:(e,t)=>{function i(e,t,i,s,h){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(i.x,i.y),e.lineTo(s.x,s.y),e.closePath(),h&&e.fill(),e.stroke()}Object.defineProperty(t,"__esModule",{value:!0}),t.drawCircle=t.drawTriangleOutline=t.drawTriangleFill=void 0,t.drawTriangleFill=(e,t,s,h)=>i(e,t,s,h,!0),t.drawTriangleOutline=(e,t,s,h)=>i(e,t,s,h,!1),t.drawCircle=function(e,t,i){e.beginPath(),e.arc(t.x,t.y,i,0,2*Math.PI),e.stroke()}},54:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearDeadGameObjectsFromWorld=t.detectPlayerMissileAndEnemyShipCollisions=t.drawAndUpdateWorld=t.init=void 0;const s=i(796),h=i(810),r=i(520);t.init=(e,t,i)=>{let s={x:e/2-10,y:t-100},n={player:(0,h.createPlayerShip)(s),playerMissiles:new Array,enemies:new Array,enemyMissiles:new Array};for(let s=0;s<i;++s){let h={x:20+e/i*s,y:t/10};n.enemies.push((0,r.createEnemyShip)(h))}return n},t.drawAndUpdateWorld=(e,t,i,s)=>{s.player.draw(e),s.player.updatePosition(t,i),[s.playerMissiles,s.enemies,s.enemyMissiles].forEach((s=>{s.forEach((s=>{s.draw(e),s.updatePosition(t,i)}))}))},t.detectPlayerMissileAndEnemyShipCollisions=e=>{e.enemies.forEach((t=>{e.playerMissiles.forEach((e=>{(0,s.objectsAreColliding)(t,e)&&(t.alive=!1,e.alive=!1)}))}))},t.clearDeadGameObjectsFromWorld=e=>{[e.playerMissiles,e.enemies,e.enemyMissiles]=[e.playerMissiles,e.enemies,e.enemyMissiles].map((e=>e.filter((e=>e.isAlive()))))}}},t={};function i(s){var h=t[s];if(void 0!==h)return h.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}(()=>{const e=i(829),t=i(531),s=i(54),h=document.getElementById("canvas"),r=h.getContext("2d"),n=h.width,l=h.height;let a=(0,s.init)(n,l,10);document.addEventListener("keydown",(t=>{(0,e.parseInputAndReturnAction)(t)(a)})),document.addEventListener("keyup",(t=>{(0,e.parseInputAndStopPlayerMoving)(t,a)})),function e(){r.clearRect(0,0,h.width,h.height),(0,t.writeText)(r,`Enemies remaining: ${a.enemies.length}`),(0,s.drawAndUpdateWorld)(r,n,l,a),(0,s.detectPlayerMissileAndEnemyShipCollisions)(a),(0,s.clearDeadGameObjectsFromWorld)(a),requestAnimationFrame(e)}()})()})();